from __future__ import absolute_import, division, print_function, unicode_literals

import unittest
from platformdatafetcher import google_plus


class TestGPlusJSExtraction(unittest.TestCase):
    def setUp(self):
        self.service = google_plus.GPlusService()
        self.profile = self.service.parse_profile(test_data)

    def test_name(self):
        self.assertEqual('Fabio', self.profile.first_name)
        self.assertEqual('Bastunci', self.profile.last_name)
        self.assertEqual('Fabio Bastunci', self.profile.full_name)
        self.assertEqual(['LeFabio'], self.profile.other_names)

        self.assertEqual('my introduction', self.profile.introduction)
        self.assertEqual('my tagline', self.profile.tagline)

    def test_location(self):
        self.assertEqual('Rome', self.profile.location)

    def test_email(self):
        self.assertEqual(['test@fbastunci.it'], self.profile.emails)

    def test_gender(self):
        self.assertEqual('Male', self.profile.gender)

    def test_links(self):
        self.assertEqual([('YouTube', 'https://www.youtube.com/user/Maroon5VEVO')], self.profile.profiles)
        self.assertEqual([('Blog', 'http://fabio.it')], self.profile.sites)
        self.assertEqual([('Somelink', 'http://somelink.com')], self.profile.links)


test_data = '''
)]}'

[["op.gp",["101513662537904844511",0,[,,"https://plus.google.com/101513662537904844511","//lh4.googleusercontent.com/-g4wnQ4l2oog/AAAAAAAAAAI/AAAAAAAAAAA/xlaioa8Fefo/photo.jpg",[[,,,,[]
,6]
,"Fabio","Bastunci","Fabio Bastunci",0]
,[[,,,,[]
,6]
,[["LeFabio"]
]
]
,[[,,,,[]
,6]
,""]
,[[,,,,[]
,6]
,[]
]
,[[,,,,[]
,6]
,[]
]
,[[,,,,[]
,6]
,"Rome",["London"]
,,["Rome",[,419027835,124963655,1]
]
,[["London",[,515073509,-1277583,1]
]
]
]
,"//maps-api-ssl.google.com/maps/api/staticmap?size\u003d375x175\u0026sensor\u003dfalse\u0026language\u003dbg\u0026markers\u003dsize:small%7Ccolor:green%7C51.5073509,-0.1277583\u0026markers\u003dsize:small%7Ccolor:blue%7C41.9027835,12.4963655\u0026client\u003dgoogle-profiles\u0026signature\u003dlZbbnMmF2JHD4vzqIY1y-DYHhHU%3D",[[]
,[,,,,[]
,6]
,[,,,,[]
,6]
]
,[[,,,,[]
,6]
,[]
,[]
,[]
,[]
,,[]
,[]
,,[["test@fbastunci.it",0]
]
,[]
]
,[[,,,,[]
,6]
,[]
,[]
,[]
,[]
,,[]
,[]
,,[]
,[]
]
,[[,,,,[]
,6]
,"my introduction"]
,[]
,[[,,,,[]
,6]
,"",0]
,[[,,,,[]
,6]
,1]
,,[[,,,,[]
,6]
,"my bragging"]
,,,[[,,,,[]
,6]
,0,1]
,[[,,,,[]
,6]
,[]
]
,[[,,,,[]
,6]
,0]
,[[,,,,[]
,6]
,0]
,[[,,,,[]
,6]
,0]
,[]
,[]
,,"101513662537904844511",1,,[[,,,,[]
,6]
,"my tagline"]
,,[[,,,,[]
,6]
,[]
]
,,[[,,,,[]
,6]
,0]
,,[,0]
,0,,,,[,0,0,,0,1,,,0,1,1]
,1,[4,,0,,0,[]
]
,[[,,,,[]
,6]
,""]
,0,,1,[[[[,,,,[]
,6]
,"https://www.youtube.com/user/Maroon5VEVO","//s2.googleusercontent.com/s2/favicons?domain\u003dwww.youtube.com\u0026alt\u003dp","YouTube","me",0,["https://www.youtube.com/user/Maroon5VEVO","sgn://youtube.com/?ident\u003dmaroon5vevo"]
,[]
]
]
,,[,,,,[]
,6]
]
,[[[[,,,,[]
,6]
,"http://fabio.it","//s2.googleusercontent.com/s2/favicons?domain\u003dfabio.it\u0026alt\u003dp","Blog","contributor-to",0,["http://fabio.it"]
,[]
]
]
,,[,,,,[]
,6]
]
,[[[[,,,,[]
,6]
,"http://somelink.com","//s2.googleusercontent.com/s2/favicons?domain\u003dsomelink.com\u0026alt\u003dp","Somelink","",0,["http://somelink.com"]
,[]
]
]
,,[,,,,[]
,6]
]
,1,[,[]
]
,[[,,,,[]
,6]
,0]
,,,[]
,[,,,,,,[]
,[]
]
,[[,,,,[]
,6]
,0]
,0,[2,[]
]
,,1,[0,1]
,1,[]
,[[]
]
,[,[]
,,0]
,[[]
]
,[]
,[,[]
]
,[[1]
]
,,[[,,,,[]
,6]
,""]
,1384623008238,[["//maps-api-ssl.google.com/maps/api/staticmap?size\u003d320x175\u0026sensor\u003dfalse\u0026language\u003dbg\u0026markers\u003dsize:small%7Ccolor:green%7C51.5073509,-0.1277583\u0026markers\u003dsize:small%7Ccolor:blue%7C41.9027835,12.4963655\u0026client\u003dgoogle-profiles\u0026signature\u003dOivXgSH1boxIfTq0rCbdYXTqtzM%3D","//maps-api-ssl.google.com/maps/api/staticmap?size\u003d400x175\u0026sensor\u003dfalse\u0026language\u003dbg\u0026markers\u003dsize:small%7Ccolor:green%7C51.5073509,-0.1277583\u0026markers\u003dsize:small%7Ccolor:blue%7C41.9027835,12.4963655\u0026client\u003dgoogle-profiles\u0026signature\u003d4EiGYo7j1fzwksDZY8JzGh_GT_o%3D","//maps-api-ssl.google.com/maps/api/staticmap?size\u003d480x175\u0026sensor\u003dfalse\u0026language\u003dbg\u0026markers\u003dsize:small%7Ccolor:green%7C51.5073509,-0.1277583\u0026markers\u003dsize:small%7Ccolor:blue%7C41.9027835,12.4963655\u0026client\u003dgoogle-profiles\u0026signature\u003df9lkHS8uVBezVQCAC_ozxa7wFYE%3D"]
]
,[,,[]
,[]
,[]
,[]
,[]
,,,,[]
,,,,[]
,,[]
,[]
,[]
,[]
,,,[]
,[]
,,,,[]
]
,0,0,0,[0]
]
,[[0,[]
]
,[0,[]
]
,[0,[]
]
]
,[[]
,"",[1,2,"101513662537904844511",,,12,,"social.google.com",[]
,,,,,,,[]
,,0,2,,,0,,15,,[[1002,2]
,[119,127,110,120,132,135,115,138,142]
,0,0]
,,,0,,,0,,,,1]
,,[]
,,,[]
,,"CAA\u003d",[440,2,[]
]
,[[[[,[[[[]
,[]
]
]
]
,[0,520,520]
]
]
,1]
,[[]
,2]
,[[]
,3]
]
]
,,"AMP3uWaXb2LcxNzQMk6RAvKl50-tD6z6P2_-g2nPZsqykiPSZ05fbYvPyHWQHNrNRwxPcmLyYvGS",,,,[,[]
,,,,"https://lh5.googleusercontent.com/-eAPognoXTwE/UYFKq101UyI/AAAAAAAABiY/REl1Ei8txP8/w1600-h900/default_cover_5_ff9ff46d48dc181084c9c23a120b68d8.jpg","https://lh5.googleusercontent.com/-eAPognoXTwE/UYFKq101UyI/AAAAAAAABiY/REl1Ei8txP8/w1600-h900-fSoften\u003d1,60,0/default_cover_5_ff9ff46d48dc181084c9c23a120b68d8.jpg"]
,,,,,"https://profiles.google.com",[,0,0,,0,1,,,0,0,0,0]
,,,0,,,,[2,[]
]
,[[]
,,,[]
,0,0,0]
,,,0,[]
,,,[[10,11,13]
,[12,14]
,[[]
]
,[[[[,[[[[]
,[[0,"10",0,300]
,[0,"12",0,300]
,[0,"11",0,300]
,[0,"14",0,300]
,[0,"13",0,300]
]
]
]
]
,[0,520,520]
]
]
,1]
,[[[,[[[[]
,[[0,"10",0,300]
,[0,"11",0,300]
,[0,"13",0,300]
]
]
,[[]
,[[0,"12",0,300]
,[0,"14",0,300]
]
]
]
]
,[0,440,520]
]
]
,2]
,[[[,[[[[]
,[[0,"10",0,300]
,[0,"14",0,300]
]
]
,[[]
,[[0,"12",0,300]
,[0,"13",0,300]
]
]
,[[]
,[[0,"11",0,300]
]
]
]
]
,[0,360,520]
]
]
,3]
]
,[10,12,11,14,13]
,[]
,[440,2,[]
]
]
,[[]
]
,0,"posts",,[["oe.ehp",[]
,[]
,[]
,[]
,[]
,,[]
,[]
,[]
]
]
,,0,[,[[]
]
]
,,[[]
]
,[2]
,[]
,0,0]
]
,["di",280,,,,,[]
,[]
,,,[]
,[]
,[]
]
]
'''
